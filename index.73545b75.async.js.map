{"version":3,"sources":["webpack:///./src/index.less","webpack:///./src/layouts/header/index.less","webpack:///./src/layouts/header/index.tsx","webpack:///./src/index.tsx","webpack:///./src/utils/storage.ts"],"names":["module","exports","Header","props","theme","onToggleTheme","useState","isShowX","setIsShowX","history","useHistory","location","useLocation","handleClickTitle","useCallback","push","RouteLink","handleToggleTheme","storage","key","LOCAL_STORAGE_NAME","value","handleOpenDirectoryOnlyArticle","EventEmitter","EVENT_EMITTER_NAME","goBack","useEffect","className","classnames","style","alignItems","justifyContent","icon","pathname","includes","onClick","faSun","faMoon","memo","library","fas","faFacebookSquare","faYoutubeSquare","faLinkedin","faTwitterSquare","IndexedDB","dbVersion","dbName","dbStoreName","specifyKey","Index","setTheme","useWindowEventListener","console","log","handleChangeTheme","html","document","querySelector","setAttribute","localTheme","children","saveLocalStorage","data","localStorage","setItem","saveBatchLocalStorage","forEach","item","getLocalStorage","options","returnType","converter","CONVERT_TYPE_MAP","getItem","clearLocalStorage","removeItem","clearAllLocalStorage","clear","saveSessionStorage","sessionStorage","getSessionStorage"],"mappings":"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","file":"index.73545b75.async.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"content___3-pTm\",\"layout\":\"layout___1uzIr\",\"absoluteHorizontalVerticalCenter\":\"absoluteHorizontalVerticalCenter___21_uB\",\"marginHorizontalVerticalCenter\":\"marginHorizontalVerticalCenter___3QJyU\",\"textOverflowEllipsis\":\"textOverflowEllipsis___1wr59\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header-light\":\"header-light___3cGmx\",\"header-dark\":\"header-dark___pcRuq\",\"header\":\"header___2O2lm\",\"bars\":\"bars___26yCn\",\"title\":\"title___a0WaH\",\"themeIcon\":\"themeIcon___q2Qkx\",\"headerInfo\":\"headerInfo___25wHO\",\"hideBars\":\"hideBars___bkJr0\",\"back\":\"back___FsmmO\",\"hideLeftIcon\":\"hideLeftIcon___L5pJo\",\"navigation\":\"navigation___3mfr-\",\"absoluteHorizontalVerticalCenter\":\"absoluteHorizontalVerticalCenter___2C_vn\",\"marginHorizontalVerticalCenter\":\"marginHorizontalVerticalCenter___scs3c\",\"textOverflowEllipsis\":\"textOverflowEllipsis___PsGMq\"};","import { memo, useCallback, useEffect, useState } from 'react'\nimport { useHistory } from 'umi'\nimport { useLocation } from 'react-router-dom'\nimport classnames from '@yomua/y-classnames'\nimport EventEmitter from '@yomua/y-eventemitter'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSun, faMoon } from '@fortawesome/free-solid-svg-icons'\n\nimport storage from '@/utils/storage'\nimport { Text, Direction } from '@/component'\nimport {\n    RouteName,\n    RouteLink,\n    EVENT_EMITTER_NAME,\n    LOCAL_STORAGE_NAME,\n} from '@/utils/constant'\n\nimport style from './index.less'\n\ninterface HeaderProps {\n    theme?: Theme\n    onToggleTheme?: (theme: Theme) => void\n}\n\n// const navigationData = [\n//     { id: 'index', label: RouteName.Index, link: RouteLink.Index },\n//     { id: 'type', label: RouteName.Type, link: RouteLink.Type },\n//     { id: 'mood', label: RouteName.Mood, link: RouteLink.Mood },\n//     { id: 'about', label: RouteName.About, link: RouteLink.About },\n// ]\n\nconst Header = (props: HeaderProps) => {\n    const { theme = 'light', onToggleTheme = () => null } = props\n\n    // 显示 [X] 图标\n    const [isShowX, setIsShowX] = useState(false)\n\n    const history = useHistory()\n    const location = useLocation()\n\n    const handleClickTitle = useCallback(() => {\n        history.push(`/${RouteLink.Index}`)\n        setIsShowX(false)\n    }, [])\n\n    const handleToggleTheme = useCallback((theme: Theme) => {\n        return () => {\n            // 将在 @/index 设置主题\n            storage.saveLocalStorage({\n                key: LOCAL_STORAGE_NAME.DATA_THEME,\n                value: theme === 'light' ? 'dark' : 'light',\n            })\n\n            if (theme === 'light') {\n                onToggleTheme('dark')\n                return\n            }\n            onToggleTheme('light')\n        }\n    }, [])\n\n    const handleOpenDirectoryOnlyArticle = useCallback(() => {\n        EventEmitter.emit(EVENT_EMITTER_NAME.SHOW_HEADER_X, !isShowX)\n\n        EventEmitter.emit(EVENT_EMITTER_NAME.OPEN_ARTICLE_DIRECTORY)\n    }, [isShowX])\n\n    const handleBack = useCallback(() => {\n        history.goBack()\n    }, [])\n\n    useEffect(() => {\n        EventEmitter.on(EVENT_EMITTER_NAME.SHOW_HEADER_X, (isShowX) => {\n            setIsShowX(isShowX)\n        })\n\n        return () => {\n            EventEmitter.off(EVENT_EMITTER_NAME.SHOW_HEADER_X)\n        }\n    }, [])\n\n    return (\n        <div className={classnames(style.header, style[`header-${theme}`])}>\n            <Direction\n                alignItems='center'\n                justifyContent='space-between'\n                className={style.headerInfo}>\n                {/* <FontAwesomeIcon\n                    className={classnames(style.back, {\n                        [style.hideLeftIcon]:\n                            location.pathname === `/${RouteLink.Index}`,\n                    })}\n                    icon='chevron-left'\n                    onClick={handleBack}\n                /> */}\n                <FontAwesomeIcon\n                    icon={isShowX ? 'times' : 'bars'}\n                    className={classnames(style.bars, {\n                        [style.hideBars]:\n                            !location.pathname.includes('/feature/article'),\n                    })}\n                    onClick={handleOpenDirectoryOnlyArticle}\n                />\n                <Text className={style.title} onClick={handleClickTitle}>\n                    青芽\n                </Text>\n                <FontAwesomeIcon\n                    className={style.themeIcon}\n                    icon={theme === 'light' ? faSun : faMoon}\n                    onClick={handleToggleTheme(theme)}\n                />\n            </Direction>\n\n            {/* 暂时不需要 Index Type Mood About 这些 */}\n            {/*  <Direction>\n                <Navigation\n                    data={navigationData}\n                    className={style.navigation}\n                />\n            </Direction> */}\n        </div>\n    )\n}\n\nexport default memo(Header)\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { Layout } from 'antd'\nimport { fas } from '@fortawesome/free-solid-svg-icons'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport {\n    faLinkedin,\n    faTwitterSquare,\n    faYoutubeSquare,\n    faFacebookSquare,\n} from '@fortawesome/free-brands-svg-icons'\nimport IndexedDB from '@yomua/y-indexeddb'\nimport { useWindowEventListener } from '@yomua/y-hooks'\n\nimport style from './index.less'\nimport Footer from './layouts/footer'\nimport { Sidebar } from './component'\nimport Header from './layouts/header'\nimport storage from './utils/storage'\nimport { ThemeProvider } from './contexts'\nimport { LOCAL_STORAGE_NAME } from './utils/constant'\n\n// 添加 fontawesome 免费版: https://fontawesome.com/search?q=menu&o=r&m=free\nlibrary.add(fas, faFacebookSquare, faYoutubeSquare, faLinkedin, faTwitterSquare)\n\n// 初始化 IndexedDB\n// 注意: 目前不需要用它\nIndexedDB.singleInstance.open({\n    dbVersion: 1,\n    dbName: 'yomuaDB',\n    dbStoreName: 'yomua',\n    specifyKey: 'filepath',\n})\n\n// 此文件匹配路由 '/', 所以可以认为此文件类似入口文件;\n// 为什么说类似? 因为 umi 已经配置了入口文件(使用者无感知), src/.umi/umi.ts,\n// => Ref: /umi_webpack_dev.js 或 umi_webpack_prod.js - entry 字段\nconst Index = (props: { children: React.ReactNode }) => {\n    const [theme, setTheme] = useState<Theme>('light')\n\n    useWindowEventListener('resize', () => {\n        console.log('__fff')\n    })\n\n    const handleChangeTheme = useCallback((theme: Theme) => {\n        setTheme(theme)\n    }, [])\n\n    useEffect(() => {\n        const html = document.querySelector('html')\n\n        if (!html) {\n            return\n        }\n\n        html.setAttribute(LOCAL_STORAGE_NAME.DATA_THEME, theme)\n    }, [theme])\n\n    // 恢复用户上一次选择的主题\n    useEffect(() => {\n        const localTheme = storage.getLocalStorage<'string', Theme>(\n            LOCAL_STORAGE_NAME.DATA_THEME,\n        )\n\n        if (localTheme) {\n            setTheme(localTheme)\n        }\n    }, [])\n\n    return (\n        <ThemeProvider theme={theme}>\n            <Layout className={style.layout}>\n                <Header theme={theme} onToggleTheme={handleChangeTheme} />\n\n                <Layout.Content className={style.content}>\n                    <Sidebar />\n                    {props.children}\n                </Layout.Content>\n\n                {/* <Footer /> */}\n            </Layout>\n        </ThemeProvider>\n    )\n}\n\nexport default Index\n","import log from './log'\nimport { EnvValueType, JSValueType } from './utils.d'\nimport { CONVERT_TYPE_MAP, LOCAL_STORAGE_NAME } from './constant'\n\ntype StorageDataKey<KeyType> = { key: KeyType; value: string }\n\nconst saveLocalStorage = (\n    data: StorageDataKey<LOCAL_STORAGE_NAME>,\n    // config?,\n) => {\n    const { key, value } = data\n\n    if (!key) {\n        log.error('saveLocalStorage key 不存在', key)\n        return false\n    }\n\n    localStorage.setItem(key, value)\n\n    return true\n}\n\nconst saveBatchLocalStorage = (data: StorageDataKey<LOCAL_STORAGE_NAME>[]) => {\n    data.forEach((item) => {\n        const { key, value } = item ?? {}\n\n        if (!key) {\n            log.error('saveBatchLocalStorage key 不存在: ', key)\n            return false\n        }\n\n        localStorage.setItem(key, value)\n    })\n\n    return true\n}\n\nconst getLocalStorage = <\n    ReturnType extends JSValueType = 'string',\n    DataType = string,\n>(\n    key: LOCAL_STORAGE_NAME,\n    options?: { returnType?: ReturnType },\n): EnvValueType<ReturnType, DataType> => {\n    if (!key) {\n        log.error('getLocalStorage: key 不存在')\n        return '' as EnvValueType<ReturnType, DataType>\n    }\n\n    const { returnType = 'string' } = options ?? {}\n\n    const converter = CONVERT_TYPE_MAP[returnType]\n\n    return converter(localStorage.getItem(key) ?? '') as EnvValueType<\n        ReturnType,\n        DataType\n    >\n}\n\nconst clearLocalStorage = (key: LOCAL_STORAGE_NAME) => {\n    if (!key) {\n        log.warn('clearLocalStorage: key 不存在')\n        return false\n    }\n\n    localStorage.removeItem(key)\n\n    return true\n}\n\nconst clearAllLocalStorage = () => {\n    localStorage.clear()\n    return true\n}\n\nconst saveSessionStorage = (\n    data: StorageDataKey<string>,\n    // config?,\n) => {\n    const { key, value } = data\n\n    if (!key) {\n        log.error('saveSessionStorage: key 不存在')\n        return\n    }\n\n    sessionStorage.setItem(key, value)\n}\n\nconst getSessionStorage = (key: string) => {\n    if (!key) {\n        log.error('getSessionStorage: key 不存在')\n        return ''\n    }\n\n    return sessionStorage.getItem(key) ?? ''\n}\n\nexport default {\n    // localStorage\n    saveLocalStorage,\n    saveBatchLocalStorage,\n    getLocalStorage,\n    clearLocalStorage,\n    clearAllLocalStorage,\n\n    // sessionStorage\n    saveSessionStorage,\n    getSessionStorage,\n}\n"],"sourceRoot":""}