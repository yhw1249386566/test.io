# 展开语法

是的,数组理所当然能使用展开语法,参见<展开语法.md>

## 展开语法在数组中的应用

### 复制数组

因为数组是复合的数据类型，直接复制的话，只是复制了指向底层数据结构的指针，而不是克隆一个全新的数组。

```javascript
const a1 = [1, 2];
const a2 = a1;

a2[0] = 2;
a1 // [2, 2]
```

或者说因为数组是特殊的的对象,而对象又是易变的,参见:<对象.md>,所以多个指针指向同一个数组(对象),它们都是改变同一个数组中的值.

在ES5 中只能用变通方法来复制数组。

```javascript
const a1 = [1, 2];
const a2 = a1.concat();

a2[0] = 2;
a1 // [1, 2]
```

上面代码中，`a1`会返回原数组的克隆，再修改`a2`就不会对`a1`产生影响。

扩展运算符提供了复制数组的简便写法。

```javascript
const a1 = [1, 2];
// 写法一
const a2 = [...a1];
// 写法二
const [...a2] = a1;
```

- ***const [...a2] = a1;***

  a2此时是一个剩余参数(参见<展开语法.md>),它必须放到最后面,如果在...a2后还有其他参数,则报错: Rest element must be last element

### 合并数组

扩展运算符提供了数组合并的新写法。

```javascript
const arr1 = ['a', 'b'];
const arr2 = ['c'];
const arr3 = ['d', 'e'];

// ES5 的合并数组
arr1.concat(arr2, arr3);
// [ 'a', 'b', 'c', 'd', 'e' ]

// ES6 的合并数组
[...arr1, ...arr2, ...arr3]
// [ 'a', 'b', 'c', 'd', 'e' ]
```

**这种方式属于浅拷贝***(和普通对象使用这种方式克隆一样,参见<展开语法.md-构造字面量对象时,进行克隆或者属性拷贝(ES2018新增)>)*

即 : **不包含指定对象的prototype**,即新对象不会拷贝指定对象存于的prototype属性指针指向的Prototype原型对象的内存地址空间的内容.

### 与解构赋值结合

参见:<变量的解构赋值.md - 示例 - 数组的解构赋值>

### 将字符串转为数组

```javascript
[...'hello']
// [ "h", "e", "l", "l", "o" ]

```

能以上面这样做的原因是因为,(...)展开语法本身会调用@@iterator方法,即`xxx[Symbol.iterator]()`,然后会迭代'yomua'这个字符串,

一个一个的字符进行迭代,将获取到的每一个字符,进行语法层次上的展开,又由于迭代过程处于一个数组中,所以经过迭代获取到的值会返回给数组索引.

所以输出[ "h", "e", "l", "l", "o" ],如果不在数组中:`console.log(...'yomua'); `输出的是,y o m u a. 

这相当于: `console.log('y', 'o', 'm', 'u', 'a')`

除此之外,还有一个重要的好处，那就是能够正确识别四个字节的 Unicode 字符。

```javascript
	'x\uD83D\uDE80y' // x🚀y
console.log('x\uD83D\uDE80y'.length)// 4
console.log([...'x\uD83D\uDE80y'].length)// 3
```

-    上面代码的第一种写法，JavaScript 会将四个字节的 Unicode 字符，识别为 2 个字符，采用扩展运算符就没有这个问题.

  ​    即: x为第1个字符, \uD83D第二个,\uDE80第三个, y第4个.

  ​	但实际上,所谓的第三个字符和第四个字符是一起的,即显示一个:🚀

  否则单独的:`console.log(\uD83D)`会是乱码:�,因为这是双字节表示拆成了1个字节,而不是本来就是单字节表示.

凡是涉及到操作四个字节的 Unicode 字符的函数，都有这个问题。因此，最好都用扩展运算符改写。

# 一些属性

参数<ES6,阮一峰>

## Array.from()

## Array.of()

## Array.prototype. copyWithin()

## Array.prototype. find() 和 findIndex()

## Array.prototype. fill()

## Array.prototype. entries()，keys() 和 values()

## Array.prototype. includes()

## Array.prototype. flat()，flatMap()

## 数组的空位

# Array.prototype.sort() 的排序稳定性

# 如何创建多维数组

参见如何创建二维数组,以此为基础,就能创建多维数组:***<逗号运算符.md - 示例 -用在for循环中>***

或参见:[此处](https://www.jianshu.com/p/24bd5495a367)