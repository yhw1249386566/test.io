[TOC]

# 描述

***详情请看<CSS权威指南P223.md>***

***<视觉格式化基础_行内置换和非置换元素.md> - 行内元素 - 基本属性和概念 - 行内框 和 行内元素 - 行内非置换元素 - 行框的构成***

行由内容区,行内框,行框三大基本属性构成.

其中又有: 基线,中线,顶线,底线,行高,行距等构成物.

详情往下看,

# 基线、中线、顶线、底线

我们用一幅图来表示这四条线的概念,请看图1-1

![](..\CSS之保存图片\基线_中线_底线_顶线.png)

​                                                                        图1-1

***每条线详解:***

1. ​    基线:所谓的基线从图1-1上来看,似乎像是汉字文字的下端沿,其实不是的.
   
   ​    实际上**基线指的是一个字体族中的字体的英文字母x/X(无论大小写)的下端沿**.

2. ​    中线: 顾名思义,就是在顶线和底线的中间位置的那条线.

3. ​    顶线和底线: ~~其实也指em方框(不知道什么是em方框的同学,去面壁思过,详情请看:<em方框(盒子).md>)的上边线和下边线.~~
   
   ​    指一个字体族中的字体中的字符的上边线和下边线分别就是顶线和底线.
   
   ​    所以每个字符的顶线和底线都有可能不同.

# 内容区

## 描述

对非置换元素而言,内容区有两种定义,CSS规范运行用户代理选择其中一个实现.

1. 各字符的字体框连在一起构成的方框（内容区是一个矩形框）
   
   1. 字体框:由字体具体定义,也可以叫做字符框.
      
      ​    通常说的内容区就是以这种方式定义的.因为较简单,只需要根据当前字体自己设置的字体高度来规定内容区高度就完成了.

2. 各字符的字型合在一起构成的方框（内容区.
   
   1. ​    即字体的字型有高有矮,例如:汉字和英文,大小写英文等的字符高度都不同.将它们每个字符的高度合在一起就是内容区.

对置换元素而言:其内容区高度是自身元素的高度+内边距高度+外边距高度+边框. 

​    *(如同7个属性一样,7个属性详情请看:<视觉格式化基础_块级置换和非置换元素.md>*

### 第一种

一个元素中通常都是有内容的,例如: 一段话,一串字符以及实体符号.

而内容是被一个框包裹着的,~~这就是我们常说的em方框,~~即被顶线和底线包裹的区域,就是内容区域,请看图1-2

这个顶线和底线是字体本身自己设置的字体高度.

![](..\CSS之保存图片\内容区域.png)

​                                                                    图1-2

- 从图上我们可以发现,每个字体的内容区域是不一样的,因为每个字符的高度不一样,甚至同一个字体中的字符的内容区域都是不同的.

### 第二种

![](..\CSS之保存图片\内容区第二种定义.png)

第二种是不常用的方式,即使是用户代理可以选择,也很少选择此方式.

即将每个字符的形成的不同大小的矩形框,合在一起就成了内容区.

# 行高line-height

## 定义

同一个元素的内容中,相邻的两个文本行之间,上一个文本行的基线到下一个文本行之间的基线的距离为: 行高line-height

第一行的行高和其他行的行高一样的高度,详情往下看 *描述 - 一个元素中存在2个及以上文本行*

​    *这样一看,line-height其实可以说就是em方框.但是意义不同,em方框是在没有行距的情况下的取值,也就是没有line-height下的取值..*

若一个块级元素中只存在一个文本行,则此块级元素行高line-height值就是内容区高度,且行距将会一分为二,即上/下行距 =( line-height值 - font-size值) / 2

*行距只有非置换元素才存在*

## 取值

- 一个 `<数字>`
- 一个 `<长度>`
- 一个 `<百分比>`
- 关键词 `normal`。

## 描述

对于块级元素，它指定元素行盒（line boxes）的最小高度。对于非[替代](1de27985dbd81f5cad8516f53531d5a5.html)的 inline 元素，它用于计算行盒（line box）的高度。

line-height属性用于设置多行元素的空间量,即多行文本之间的间距(当然是在同一个元素中).

如果只有一个文本行的元素,则line-height属性处理的情况又会不同.

且CSS规范和大多数人以及我都推荐将line-height属性的值设置为纯数字,即1,2,1.4这些.因为经过实践表明,这是该属性的最佳单位.

如果要说原因的话,则是因为纯数字相当于比例因子,而这个因子能被继承,而不计算为具体的值,这样就不会因为每个User Agent的计算误差导致出错与预期不符的CSS样式.

### 一个元素中存在2个及以上文本行

```
        PS:多个文本行中,第一行和最后一行的行高和其他行的行高是一样的,因为用户代理会虚拟一个上一个行出来,然后这个行的基线和当前行的基线的高度就是line-height值,最后一行也是如此.

​        有时候我们看到第一行的行高和最后一行的行高似乎于其他行的行高不同,通常感觉像是低了一些,但是这是错误的理解,

​        用户代理虚拟一个上一行或者下一行出来时,这个虚拟的行通常不会在当前所在的元素的行内/块级框之内,所以如果你有设置其边框的话,则会感觉第一行和最后一行的行高"少了",
        因为你会将第一行的基线/最后一行的基线到上方/下方边框的高度和其他行的行高对比,但是这是错误的对比: 

        因为你若实际去测试: 

​            一个页面中放置一个块级/行内元素,设置多个文本行,设置line-height值,但不加边框,此时你就会发现第一行的基线到整个界面的可显示区域的高度和其他行的行高并没有什么不同;  
            这就代表第一行是有行高的且高度和其他行没有什么不同,只不过由于是在第一行这个位置,所以会经常导致人们出现"视觉错误",
            第一行并不是和边框去对比看行高,而是用户代理会自动虚拟一个第一行的上一行出来,并用让上一行的基线和当前行的基线和行高严格相等.

​            默认情况下,如果你知道line-height值,并且从最后一行的基线计算出虚拟行的(最后一行的下一行)的基线位置在哪,
​            并推测"如果我再任意添加一行,此时最后一行的基线位置是否为我刚才计算出来的基线位置" ,若此若做,你会发现,确实是你刚才计算的位置.
            所以的很显然,最后一行的下方的高度也是存在,不过好像我没必要讲这个最后一行的下方的高度...因为多个文本行情况下,行高是和上一行的基线对比...

            显然的,第一行也是存在行高的且和其它行的行高没有什么不同.
```

在多个文本行中,line-height指的"行高"并不是内容区的高度,它是相对于文本行之间的高度而言的.请看示例 - 一个元素中存在2个及以上文本行

在多个文本行中,line-height虽然指的是文本行的行高,但是实际作用是控制行距,即相邻的两个文本行,上一个文本行的基线到下一个文本行的顶线(内容区边界).

此时行距的计算就等于:

​    **行距 = line-height属性值 - font-size属性值** 

```html
    p {
        font-size:50px;
        line-height: 100px;
    }
```

- 这个样式代表着,相邻的文本行之间的行高为100px,行距为100px-50px = 50px

### 一个元素中只存在1个文本行

若在一个元素中只存在一个文本行,则line-height属性代表的是行内框的高度,且此时的文本行存在上下行距.

注意:虽然line-height控制的是行距,但是行距存在两个,即上行距和下行距.

下行距就是将当前行当作上一行, 也就是当前行与下一行之间的行距. 对于下一行来说,这个下行距就是上行距.

请看示例 - 一个元素中只存在1个文本行

## 示例

### 一个元素中存在2个及以上文本行

多行文本情况下,line-height属性指的行高是相对于文本行之间的高度而言的,且控制的是行距,请看以下示例

```html
<style>
    p {
        border: 1px red solid;
        width: 100px;
        white-space: pre;
    }
</style>
<p>
    yomua
    yomua
</p>
```

![](..\CSS之保存图片\line-height2.png)

请看以上渲染结果,这是在没有line-height属性的情况下,且是多行文本存在时,内容区高度为75.2,此时我们为它添加属性: `line-height:100px`

这样渲染出来的内容区高度是多少呢?是line-height这个属性的100px吗?还是别的?

![](..\CSS之保存图片\line-height3.png)

很明显的,从这个渲染结果我们可以发现,内容区的高度并不是我们所想的那样是100px,而是400px(1.6是上下边框的高度).

而这就证明了多个文本行中,line-height属性指的是行高并不是内容区高度,和单个文本行中指的是内容区(行内框)的高度是有很大区别的.

那么,这个例子中的line-height属性在哪里体现出来呢?

请看两条红色直线之间的距离就是line-hegiht属性值指的就是"行高",而控制的是第一条红色直线和下面蓝色直线之间的距离: 行距.

### 一个元素中只存在1个文本行

```html
<style>
    p {
        font-size: 15px;
        line-height: 100px;
        background-color: silver;
        border: 1px solid ;
    }
</style>

<body>
    <p>yomua</p>
</body>
```

![](..\CSS之保存图片\块级元素中单个文本行的line-height.png)

看到以上的渲染结果了吗.是不是所有疑惑都有解答了.

两个红色双向箭头代表着行距,如果再加上元素内容的字体高度就会等于整个内容区高度 = line-height属性值 = 行内框高度.

- 行内框高度 = 上下行距 + 字体高度 ,其实这个也等于line-height值

### 总结

单个文本行与多个文本行中的line-height属性的处理情况是打不一样的.

因为对于多个文本行来说,每个文本行其实都相当于存于行内元素中内容,只不过这个行内元素是虚构的.**请看:<CSS权威指南P292>**

- ​    
  
  ```html
  <p>
      <line>虚构</line>
      <line>行内</line>
      <line>元素</line>
  </p>
  ```
  
  也就是以上的情况,把<line></line>这个元素标签去掉和不去掉其效果一样的.**请看:<CSS权威指南P292>**

而这多个虚构的行内元素都继承自父元素的line-height属性值,当然会导致line-height属性处理情况大不相同了.

## 使用line-height时使用无单位的数值

给 `line-height` 赋值时使用 [`<数字>`](d310c39f0e15894ef6b325c52e53302b.html) 值比使用 [`<长度>`](772f3b442d882788a7830311c22bdc91.html) 更好。

因为这将有助于改善低可视条件下的体验，也对认知阻碍者，如阅读困难者，有帮助。

如果文字的大小要随页面的缩放而变化，请使用无单位的值，以确保行高也会等比例缩放。

# 行内框和行框

*详情请看<CSS权威指南P223.md>*

*<视觉格式化基础_行内置换和非置换元素.md> - 行内元素 - 基本属性和概念 - 行内框 和 行内元素 - 行内非置换元素 - 行框的构成*

## 行内框

### 描述

**行内框的高度可能小于内容区高度,可能大于内容区高度,可能等于内容区高度.所以我们才不能直接说: line-height值就等于内容区高度.因为这是不一定的**

行内框是一个浏览器渲染模型中的一概念,无法被显示出来(除非进入GodModel)虽然无法被显示,但是它确实存在,请看图1-3.

![](..\CSS之保存图片\行内框.png)

​                                                                    图1-3

行内框在没有其他因素影响的情况下(例如没有line-height,或者其他什么),它的高度完全等于内容区高度.

​    *如果存在line-height属性值,那么行内框高度就要加上行距的高度了,此时就不在等于内容区高度,**即内容区高度(字体高度) + 行距 = 行内框高度***

以上图1-3红色箭头所指向的蓝色虚线就是行内框+内容区形成的而趋于,我以前总是认为它是em方框,这是不对的,因为em方框是指在没有line-height属性的情况下，行和行之间基线的距离.

​    行内框的高度就是行高,也就是line-height的属性值,且请注意,我这里说的行内框是文本行的行内框,即一个元素中的文本行的行内框.而不是多个文本行.

我们说过,没有line-height属性则行内框高度 = 内容区高度,也就是等于一行中的字体框的高度.

若存在line-height属性,则行内框要多加一个行距. 即内容区高度(字体框高度) + 行距 = 行内框高度, 而这也恰好等于line-height属性值

​    *line-height属性值 = 内容区高度 + 字符高度(即字体高度)*

所以我们才说,line-height属性值就是行内框高度,但不是行距,行距还要减去字符高度(字体框高度)才是.

~~存不存在行距其行内框高度都是内容区高度.~~超级错误理解,请看示例.

### 示例

**内容区可能包含行内框,可能等于行内框,可能小于行内框.**

```html
<style>
    p {
        line-height: 12px;
        font-size: 12px;
    }
    strong {
        font-size: 24px;
    }
</style>

<body>
    <p>
        Yomua<em>I Love You</em>,Yomua<br/>
        <strong>Fuck You</strong> Yomua <br/>
        Yomua
    </p>
</body>
```

![](..\CSS之保存图片\行内框2.png)

![](..\CSS之保存图片\行内框3.png)

请注意p中的行内元素strong,它的字体高度和其他行内元素都不同,为24px.

但是其line-height属性有继承性,所以strong元素的line-height属性值仍为12px.

在描述中,我们知道,若一个元素有line-hegiht属性,且是单行文本,则它的行内框高度为line-height属性的值,也就是为12px.

而内容区的高度是字体框的高度,即等于font-size属性值.所以**最后strong元素的行内框高为: 12px, 而内容区高为:24px.**

且我们使用了多个行内元素和br折行,就如同只有一个文本行一样,

所以strong元素的上/下行距 = (line-height值 - font-size值) / 2 = -6px, 并把这上下行距为-6px的高度放到内容区的上部和下部.

这样,最后的显示结果就是: 12px高的行内框在24px高的内容区里会纵向居中显示. 这也就代表着:strong元素的内容区域包着行内框.

从而我们可以的出一个昭然若揭的结论:**内容区可能包含行内框,可能等于行内框,可能小于行内框.**

而且请注意:第二行的各元素内容的行内框虽然都为12px,但是其内容区的高度并不相同,因为每行中的文本内容都是以基线对齐.

这代表着,只要一行中,一个内容比另一个内容高,则会因为处于相同的水平线(基线对齐)上,导致其高的内容的高度永远大于低的内容高度.

看渲染结果的第二行strong元素与旁边的div元素内容即可.

## 行框

行框类似行内框,但是又有些区别.

行框也是浏览器渲染模型中的一概念,也无法被显示出来(除非进入GodModel)虽然无法被显示,但是它也确实存在.

行框和行内框的最大区别在于,如果元素中的某一行的内容并不是相同的字符内容(在行内框一章中,图1-3都是相同的x字符),那么在此字符串中,它们的行内框的高度(也就是内容区高度)可能是不相同的,

那么遇到这情况该怎么办呢? 所以才会有行框的出现. 即选择当前字符中最高的行内框作为行框的高度,选择当前字符中最低的行内框最行框的底端.

也就是说,**有概率行框的生成可能会由两个行内框决定.**

通俗一点来说: 行框包含着行内框,请看图1-5.

![](..\CSS之保存图片\行框.png)

​                                                                    图1-5

- 以上例子充分说明了什么是行框.:
  
  ​    当一个块级元素包裹着两个行内元素时,若块级元素的行内框的高度没有行内元素的行内框高度高,
  
  ​    则就会使用最高的行内框作为行框的高度.

- 且这不仅仅是发生在块级元素和行内元素中,也可能出现在行内元素和行内元素,块级元素和块级元素中,请看图1-6和图1-7

![](..\CSS之保存图片\行框2.png)

​                                                                    图1-6

![](..\CSS之保存图片\行框3.png)

​                                                                    图1-7

- ​    请注意上两图的文本行内容的差别,图1-6比图1-7多了三个汉字.同时图1-6内容区的高度 > 图1-7内容区的高度,
  
  ​    而这原因只不过是图1-6多了三个汉字,因为三个汉字将行内框撑高了,汉字天生比字母要高得多.
  
  ​    这充分的证明了,即在同一个文本行内,也存在着文字与文字之间行内框可能不相同的情况.

有趣的是,当一个元素的内容,其中的一个文本行的行内框和行框一样时,那么这就代表着文本行中的文字通常是一样大小的,即内容区高度一样大.

也就是说,此时,行框 = 行内框.

​    *PS:一个文本行中,可能存在多个行内元素,因为行内元素并不折行.这些行内元素的行内框大小不同,会影响整行的行框高度.*

## 总结

1. 行内框是一个概念存在的模型,开启God Model才能看见.

2. 默认情况下,行内框高度 = 内容区高度
   
   行框的高度由文本行中最高的行内框高度决定,行框的底端由文本行中最低的行内框决定.

3. 一个文本行中,可能出现文字与文字之间的行内框并不相同的情况.

4. 文字的高度会决定行内框的高度.(
   
   因为文字的高度决定内容区高度,内容区高度决定行内框高度,行内框高度又决定行框高度.

5. 行内框是单行文本之间的说法,但是如果有line-height属性值影响一个元素中内容区高度,那么自然也会影响行内框高度.
   
   ​    内容区高度由元素中内容决定,而元素中内容可能有多行.

6. ​    一个文本行中,可能存在多个行内元素,因为行内元素并不折行.这些行内元素的行框大小不同,会影响整行的行框高度.

# 总结

- 基线:英文字母x/X的下端沿.
- 顶线:某个字体族中的某个字体中文字的**上**边界.
- 底线:某个字体族中的某个字体中文字的**下**边界.
- 中线:顶线和底线的距离 / 2,即中间那条线.
- 内容区:被顶线和底线包括的区域.
- 行距:相邻的两个文本行之间,上一个文本行的基线到下一个文本行的顶线.
- line-height的行高:即相邻的两个文本行之间基线间的距离(和em方框取值一样,但是意义不同,em方框是在没有行距的情况下的取值.)
- 行内框:行框的子集.一个将文本行包起来的矩形区域,其高度在默认情况下为内容区高度,在有line-height属性值影响的情况下为:内容区高度+行距
- ​    行框:行内框的父集.一个矩形区域,其行框顶端(高度)由一个文本行中最高的行内框的高度决定,其行框底端由当前行的最低的那个行内框决定.
- ​    一个文本行中,可能存在多个行内元素,因为行内元素并不折行.这些行内元素的行框大小不同,会影响整行的行框高度.
