# 首尾相连轮播图

注意：你可以注释 `overflow:hidde`，这样你可以更清楚地看到轮播如何进行的。

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body {
    margin: 400px;
  }

  .slider-container {
    width: 500px;
    height: 300px;
    overflow: hidden;
    position: relative;
  }

  .slides {
    width: 100%;
    height: 100%;
    display: flex;
    transition: transform 1s ease-in-out;
  }

  .slide {
    flex: 0 0 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  img {
    width: 100%;
  }
</style>

<body>
  <div class="slider-container">
    <div class="slides">
      <div class="slide">
        <img src="https://img1.baidu.com/it/u=3573056321,2239143646&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500">
      </div>
      <div class="slide">
        <img src="https://img2.baidu.com/it/u=4049022245,514596079&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500">
      </div>
      <div class="slide">
        <img src="https://img2.baidu.com/it/u=3329909248,3799019568&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500">
      </div>
      <div class="slide">
        <img src="https://img1.baidu.com/it/u=3573056321,2239143646&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500">
      </div>
    </div>

  </div>

  <button onclick="prevSlide()">left</button>
  <button onclick="nextSlide()">right</button>

</body>

<script>
  const sliderContainer = document.querySelector('.slider-container');
  const slidesWrapper = document.querySelector('.slides');
  const slides = document.querySelectorAll('.slide');
  const slideWidth = slides[0].clientWidth;
  let currentSlideIndex = 0; // 初始化为 0，以展示第一张图片

  function showSlide(index) {
    // if (index === 0) {
    //   setTimeout(() => {
    //     currentSlideIndex++
    //     slidesWrapper.style.transform = `translateX(${-1 * slideWidth}px)`;
    //   }, 110);
    //   return
    // }

    // 最后一张图
    // if (index === slides.length - 1) {
    //   setTimeout(() => {
    //     currentSlideIndex--
    //     slidesWrapper.style.transform = `translateX(${slideWidth}px)`;
    //   }, 110);
    //   return
    // }
    const distance = -index * slideWidth;
    slidesWrapper.style.transform = `translateX(${distance}px)`;
  }

  function nextSlide() {
    currentSlideIndex++;
    console.log(currentSlideIndex)

    // 当滑动到最后一张图片时，立即将位置设置为第一张图片后的一个位置，并移除过渡效果
    if (currentSlideIndex >= slides.length) {
      currentSlideIndex = 0;
      slidesWrapper.style.transform = `translateX(0)`;
      slidesWrapper.style.transition = 'none';
      // 异步延时 50ms，然后再添加过渡效果，实现无缝滚动
      // debugger
      setTimeout(() => {
        slidesWrapper.style.transition = 'transform 1s ease-in-out';
        showSlide(++currentSlideIndex);
      }, 50);

      return

    }
    showSlide(currentSlideIndex);
  }

  function prevSlide() {
    currentSlideIndex--;

    // 当滑动到第一张图片之前时，立即将位置设置为最后一张图片后的一个位置，并移除过渡效果
    if (currentSlideIndex < 0) {
      // debugger
      currentSlideIndex = slides.length - 1;
      const distance = -currentSlideIndex * slideWidth;
      slidesWrapper.style.transform = `translateX(${distance}px)`;
      slidesWrapper.style.transition = 'none';
      // 异步延时 50ms，然后再添加过渡效果，实现无缝滚动
      setTimeout(() => {
        slidesWrapper.style.transition = 'transform 1s ease-in-out';
        showSlide(--currentSlideIndex);
      }, 50);

      return
    }
    showSlide(currentSlideIndex);
  }

  // 设置自动播放，每 3 秒切换一张图片
  // setInterval(nextSlide, 3000);

</script>
<!-- </html>
```

如果不想用图片：

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body {
    margin: 400px;
  }

  .slider-container {
    width: 500px;
    height: 300px;
    overflow: hidden;
    position: relative;
  }

  .slides {
    width: 100%;
    height: 100%;
    display: flex;
    transition: transform 1s ease-in-out;
  }

  .slide {
    flex: 0 0 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  img {
    width: 100%;
  }
</style>

<body>
  <div class="slider-container">
    <div class="slides">
      <div class="slide">
      </div>
      <div class="slide">
      </div>
      <div class="slide">
      </div>
      <div class="slide">
      </div>
    </div>
  </div>

  <button onclick="prevSlide()">left</button>
  <button onclick="nextSlide()">right</button>

</body>

<script>

  const sliderContainer = document.querySelector('.slider-container');
  const slidesWrapper = document.querySelector('.slides');
  const slides = document.querySelectorAll('.slide');
  const slideWidth = slides[0].clientWidth;
  let currentSlideIndex = 0; // 初始化为 0，以展示第一张图片

  function getRandomHexColor() {
    // Generate random hexadecimal color in the range 0x000000 to 0xFFFFFF
    const color = Math.floor(Math.random() * 16777215).toString(16);
    // Pad the color with zeros to ensure it has 6 digits
    return "#" + "0".repeat(6 - color.length) + color;
  }


  function initial() {
    const sameBgColor = getRandomHexColor()
    const sameText = 0

    for (let i = 0; i < slides.length; i++) {

      const el = slides[i];

      if (i === 0 || i === slides.length - 1) {
        el.style.backgroundColor = sameBgColor
        el.innerHTML = sameText
        continue
      }
      el.innerHTML = i
      el.style.backgroundColor = getRandomHexColor()
    }
  }


  function showSlide(index) {
    const distance = -index * slideWidth;
    slidesWrapper.style.transform = `translateX(${distance}px)`;
  }

  function nextSlide() {
    currentSlideIndex++;
    // 当滑动到最后一张图片时，立即将位置设置为第一张图片后的一个位置，并移除过渡效果
    if (currentSlideIndex >= slides.length) {
      currentSlideIndex = 0;
      slidesWrapper.style.transform = `translateX(0)`;
      slidesWrapper.style.transition = 'none';
      // 异步延时 50ms，然后再添加过渡效果，实现无缝滚动
      // debugger
      setTimeout(() => {
        slidesWrapper.style.transition = 'transform 1s ease-in-out';
        showSlide(++currentSlideIndex);
      }, 50);

      return

    }
    showSlide(currentSlideIndex);
  }

  function prevSlide() {
    currentSlideIndex--;

    // 当滑动到第一张图片之前时，立即将位置设置为最后一张图片后的一个位置，并移除过渡效果
    if (currentSlideIndex < 0) {
      // debugger
      currentSlideIndex = slides.length - 1;
      const distance = -currentSlideIndex * slideWidth;
      slidesWrapper.style.transform = `translateX(${distance}px)`;
      slidesWrapper.style.transition = 'none';
      // 异步延时 50ms，然后再添加过渡效果，实现无缝滚动
      setTimeout(() => {
        slidesWrapper.style.transition = 'transform 1s ease-in-out';
        showSlide(--currentSlideIndex);
      }, 50);

      return
    }
    showSlide(currentSlideIndex);
  }


  initial()

  // 设置自动播放，每 3 秒切换一张图片
  // setInterval(nextSlide, 3000);

</script>
<!-- </html>
```

