# less 设置主题

## 重新生成 css 设置主题

使用一个变量就搞定主题切换，扩展性强。

用变量的好处在于：扩展性强，简单易懂，只需要切换主题时，改变了 data-theme 之后，让 less 重新生成，这样就更新了变量值。



# css 设置主题

## 使用前缀

### 简单使用前缀

改变 html 的属性值，如 data-theme ='light' => data-theme='dark' ，然后在样式中写类似于以下的样式，就能实现主题的切换。

```css
[data-theme=dark] .anyClassName { 
	color:'#fffÏ'
}

[data-theme=light] .anyClassName { 
	color:'#000'
}
```

### 更优秀的使用前缀

在 <a href='#简单使用前缀'>简单使用前缀</a> 的基础上，请发散你的思考。

既然可以使用前缀，我们为何不直接使用css 变量，然后将为变量在不同的主题下赋予不同的值，代码如下：

```html
<html lang="en" dark-theme='light'>
<style>
  /** 为不同主题的文档，赋予同一个变量不同的值 */
  [dark-theme=light]:root {--color: #488cff;  }
  [dark-theme=dark]:root {--color: red;  }
  .test {color: var(--color);  }
</style>

<body>
  <div class="test">Hello World!</div>
  <button onclick="handleClick()">toggle theme</button>
</body>
<script>
  const $ = (element) => document.querySelector(element)
  const html = $('html')
  const handleClick = () => {
    const theme = html.getAttribute('dark-theme')
    if (theme === 'light') {
      html.setAttribute('dark-theme', 'dark')
      return
    }
    html.setAttribute('dark-theme', 'light')
  }
</script>
</html>
```



# React 设置主题

## 使用内联样式设置主题

可以搭配使用 [useContext()](https://zh-hans.reactjs.org/docs/hooks-reference.html#usecontext) HOOK 去在上层组件设置一个对象，如：`dark:{}, light:{}`，然后当用户切换主题时，返回对应的对象替换旧对象，这样上层组件所有的下层组件都能使用此对象，

然后下层组件可以用此对象去取对应的颜色值，并赋值给内联样式，这样就能实现主题切换。



