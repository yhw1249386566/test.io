```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>查找自定义元素</title>
    <style>
        div {
            contain: layout;
            position: relative;
        }

        h1 {
            position: sticky;
        }

        a {
            cursor: pointer;
        }
    </style>
    <script>
        const TEST = 'https://www.html5rocks.com/zh/tutorials/webcomponents/customelements/'


        function getCustomElements(url) {
            let xhr = new XMLHttpRequest();


            xhr.onreadystatechange = function () {
                const allCustomElements = [];
                let showCustomElementString = '', webHTML;
                if (this.readyState == 4 && this.status == 200) {
                    /** 取得指定URL的整个DOM */
                    webHTML = this.responseXML;
                    /** 判断是否为自定义元素 */
                    function isCustomElement(element) {
                        // 判断当前元素是否存在is属性,以防止某个元素是使用继承并扩展内置元素作为自定义元素使用.参见:<CustromElements.md>
                        const is = element.getAttribute('is');
                        // 如果当前元素名称包含-,返回true,或者 当前存在is属性且值包含-,也返回true. 否额返回false
                        return element?.localName?.includes('-') || is?.includes?.('-');
                    }
                    /** 查询自定义元素 */
                    function queryCustomElements(elementArr) {
                        for (let i = 0, element; element = elementArr[i]; ++i) {
                            // 如果当前元素名称就是自定义元素,则将当前元素放入数组中.
                            if (isCustomElement(element)) {
                                allCustomElements.push(element.localName);
                            }

                            // 如果当前元素内部存在shadow DOM,则递归该方法(遍历shadow DOM内部元素,防止shadow DOM内部也存在自定义元素)
                            if (element?.shadowRoot) {
                                queryCustomElements(element.shadowRoot.querySelectorAll('*'));
                            }
                        }
                    }
                    queryCustomElements(webHTML.querySelectorAll('*'));
                    /** 取出allCustomElements集合中的值,并将每个值放在<li>元素中 */
                    for (let value of allCustomElements) {
                        showCustomElementString += `<li>${value}</li>`
                    }

                    /** 每个<li>元素依次放入<ol>元素中,由于ol是有序列表,所以每个<li>元素的序号会依次累加 */
                    let webValue =
                        `
                        <h1>当前页面具有 <strong style='color:red'>${allCustomElements.length}</strong> 个自定义元素</h1>
                        <ol>
                            ${showCustomElementString}
                        </ol>
                        
                    `;

                    document.getElementById('div').innerHTML = webValue

                    if (document.getElementsByTagName('li').length > 0) {
                        document.getElementById('div').innerHTML += `<a href="#top">点我回到开头</a>`
                    }
                } else if (this.readyState == 1) {
                } else if (this.readyState == 2) {
                } else if (this.readyState == 3) {
                } else {
                    document.getElementById('div').innerHTML =
                        `
                        <h1>查询失败</h1>            
                        <h2>可能导致的查询失败的原因为:</h2>
                            <ol>
                                <li>您输入的网址无法访问</li>
                                <li>您的浏览器不支持查询</li>
                                <li>您输入的网址不支持查询</li>
                            </ol>
                        <h2>解决方法:</h2>
                            <ol>
                                <li>您可以更换浏览器重新尝试查询.</li>
                                <li>您可以更换查询地址</li>
                            </ol>
                    
                    `
                }
            }
            xhr.open('get', url, true);
            xhr.responseType = 'document'
            xhr.send(null);


        }

        // 得到用户输入的值,并判断值是否为url,正确则查找对应的自定义元素,错误则报错.
        function getURL() {
            let url = document.getElementById('input').value;
            const regex = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/
            if (regex.test(url)) {
                document.getElementById('div').innerHTML = '正在检索中,请不要做多于操作...'
                getCustomElements(url)
            } else {
                document.getElementById('div').innerHTML = '请输入正确的地址'
            }

        }
    </script>
</head>

<body>
    <input type="text" id="input" placeholder="请输入正确的地址" autocomplete="off">
    <button onclick="getURL()">点我获取</button>
    <div id="div"></div>
</body>

</html>
```

