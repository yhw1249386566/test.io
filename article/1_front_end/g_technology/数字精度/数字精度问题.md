# 在 js 中进行数字运算出现的精度问题

```js
0.1 + 0.2 = 0.30000000000000004 // error
```

- 使用 [decimal.js](https://www.npmjs.com/package/decimal.js?activeTab=versions) 库 ([document](https://mikemcl.github.io/decimal.js/))

```js
import Decimal from 'decimal.js'
Decimal(0.1).add(0.2).toNumber() = 0.3
```

# js 中的大数字精度丢失问题

```js
console.log(123456789123456.123456) // => 123456789123456.12
```

解决方法：使用 [bignumber.js](https://mikemcl.github.io/bignumber.js/#bignumber).

注意：若直接使用 `decimal.js`,  即使转成字符串，然后运算，也有问题

````js
Decimal('1.123456789123456789123456789').plus('1').toString() // => 2.1234567891234567891
````

你需要配置 Decimal 的计算精度：

```tsx
Decimal.config({ precision: 40 });
// 2.123456789123456789123456789
Decimal('1.123456789123456789123456789').plus('1').toString() 
```

- 或者使用： `bignumber.js`

```js
import BigNumber from 'bignumber.js'

// '123456789123456789.223456789123456789' 
new BigNumber('123456789123456789.123456789123456789').plus('0.1').toString()

```

# 原生实现

转成字符串，通过 while ，然后“双指针”，从两个字符串的末尾对齐，然后一个个相加，最后拼接。可以查看 b 站渡一。

# 注意

- 使用 decimal.js 传入 `'', '-', null, 'undefined'` ，即：不能转成数字的值，都是会报错的。
  会让页面崩溃

