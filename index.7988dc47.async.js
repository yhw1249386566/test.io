(self["webpackChunk"]=self["webpackChunk"]||[]).push([[826],{28487:function(e){e.exports={content:"content___3-pTm",layout:"layout___1uzIr",absoluteHorizontalVerticalCenter:"absoluteHorizontalVerticalCenter___21_uB",marginHorizontalVerticalCenter:"marginHorizontalVerticalCenter___3QJyU",textOverflowEllipsis:"textOverflowEllipsis___1wr59"}},92649:function(e){e.exports={"header-light":"header-light___3cGmx","header-dark":"header-dark___pcRuq",header:"header___2O2lm",bars:"bars___26yCn",title:"title___a0WaH",themeIcon:"themeIcon___q2Qkx",headerInfo:"headerInfo___25wHO",hideBars:"hideBars___bkJr0",back:"back___FsmmO",hideLeftIcon:"hideLeftIcon___L5pJo",navigation:"navigation___3mfr-",absoluteHorizontalVerticalCenter:"absoluteHorizontalVerticalCenter___2C_vn",marginHorizontalVerticalCenter:"marginHorizontalVerticalCenter___scs3c",textOverflowEllipsis:"textOverflowEllipsis___PsGMq"}},39361:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var a=r(43329),o=r(57337),i=r(67294),s=r(84131),l=r(9382),n=r(747),c=r(8870),d=Symbol();class u{constructor(e){if(this.db=void 0,this.dbName=void 0,this.dbVersion=void 0,this.dbStoreName=void 0,this.specifyKey=void 0,e&&e!==d)throw new Error("\u610f\u5916\u7684\u91cd\u590d\u521d\u59cb\u5316 IndexedDB");this.db=null,this.dbName="",this.dbVersion=1,this.dbStoreName="",this.specifyKey=""}static get singleInstance(){return this.indexedDBInstance||(this.indexedDBInstance=new u(d)),this.indexedDBInstance}getObjectStore(e,t){var r,a,o;return null!==(r=this.db)&&void 0!==r&&r.transaction||(sessionStorage.setItem("indexedDB_this",JSON.stringify(this)),location.reload(),console.info("\u5df2\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\uff0c\u67e5\u770b session \u627e\u9519\u8bef\u539f\u56e0")),null===(a=this.db)||void 0===a||null===(o=a.transaction(e,t))||void 0===o?void 0:o.objectStore(e)}open(e){var t=null!==e&&void 0!==e?e:{},r=t.specifyKey,a=void 0===r?"filepath":r,o=t.dbName,i=void 0===o?"yomuaDB":o,s=t.dbVersion,l=void 0===s?1:s,n=t.dbStoreName,c=void 0===n?"yomua":n;this.dbName=i,this.dbVersion=l,this.dbStoreName=c,this.specifyKey=a;var d=window.indexedDB.open(i,l);d.onupgradeneeded=e=>{var t,r=null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.result.createObjectStore(c,{keyPath:"id",autoIncrement:!0});r.createIndex(this.specifyKey,this.specifyKey,{unique:!0})},d.onsuccess=()=>{this.db=d.result}}getDataFromStore(e){if(!e)return null;var t=this.getObjectStore(this.dbStoreName,"readonly"),r=t.index(this.specifyKey);return r.get(e)}addDataFromStore(e,t){if(!e)return null;var r=this.getObjectStore(this.dbStoreName,"readwrite");return null===r||void 0===r?void 0:r.add((0,c.Z)((0,c.Z)({},t),{},{filepath:e}))}deleteDataFromStore(e){if(!e)return null;var t=this.getObjectStore(this.dbStoreName,"readwrite"),r=t.index(this.specifyKey);r.get(e).onsuccess=e=>{var r,a,o=null===e||void 0===e||null===(r=e.target)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.id;null===t||void 0===t||t.delete(o)}}updateDataFromStore(e,t){if(!e)return null;var r=this.getObjectStore(this.dbStoreName,"readwrite"),a=r.getAll();a.onsuccess=a=>{var o,i=(null===a||void 0===a||null===(o=a.target)||void 0===o?void 0:o.result)||[],s=i.find((t=>t.filepath===e));s?r.put((0,c.Z)((0,c.Z)({},s),{},{file:t})):this.addDataFromStore(e,{filepath:e,file:t})}}clearDataFromStore(){var e=this.getObjectStore(this.dbStoreName,"readwrite");e.clear()}}u.indexedDBInstance=void 0;var h=u,v=r(28487),m=r.n(v),_=r(10186),g=r(51615),S=r(31847),b=r(64497),f=r(67814),y=r(80560),p=r(27398),k=r(92649),x=r.n(k),I=r(85893),N=e=>{var t=e.theme,r=void 0===t?"light":t,a=e.onToggleTheme,l=void 0===a?()=>null:a,n=(0,i.useState)(!1),c=(0,o.Z)(n,2),d=c[0],u=c[1],h=(0,g.k6)(),v=(0,g.TH)(),m=(0,i.useCallback)((()=>{h.push("/".concat(p.QV.Index)),u(!1)}),[]),k=(0,i.useCallback)((e=>()=>{y.Z.saveLocalStorage({key:p.by.DATA_THEME,value:"light"===e?"dark":"light"}),l("light"!==e?"light":"dark")}),[]),N=(0,i.useCallback)((()=>{b.Z.emit(p.Re.SHOW_HEADER_X,!d),b.Z.emit(p.Re.OPEN_ARTICLE_DIRECTORY)}),[d]);(0,i.useCallback)((()=>{h.goBack()}),[]);return(0,i.useEffect)((()=>(b.Z.on(p.Re.SHOW_HEADER_X,(e=>{u(e)})),()=>{b.Z.off(p.Re.SHOW_HEADER_X)})),[]),(0,I.jsx)("div",{className:(0,S.Z)(x().header,x()["header-".concat(r)]),children:(0,I.jsxs)(_.Nm,{alignItems:"center",justifyContent:"space-between",className:x().headerInfo,children:[(0,I.jsx)(f.G,{icon:d?"times":"bars",className:(0,S.Z)(x().bars,{[x().hideBars]:!v.pathname.includes("/feature/article")}),onClick:N}),(0,I.jsx)(_.xv,{className:x().title,onClick:m,children:"\u9752\u82bd"}),(0,I.jsx)(f.G,{className:x().themeIcon,icon:"light"===r?s.enB:s.DBF,onClick:k(r)})]})})},E=(0,i.memo)(N),C=r(90155);l.vI.add(s.mRB,n.pZl,n.NY9,n.D9H,n.sd1),h.singleInstance.open({dbVersion:1,dbName:"yomuaDB",dbStoreName:"yomua",specifyKey:"filepath"});var D=e=>{var t=(0,i.useState)("light"),r=(0,o.Z)(t,2),s=r[0],l=r[1],n=(0,i.useCallback)((e=>{l(e)}),[]);return(0,i.useEffect)((()=>{var e=document.querySelector("html");e&&e.setAttribute(p.by.DATA_THEME,s)}),[s]),(0,i.useEffect)((()=>{var e=y.Z.getLocalStorage(p.by.DATA_THEME);e&&l(e)}),[]),(0,I.jsx)(C.f,{theme:s,children:(0,I.jsxs)(a.Z,{className:m().layout,children:[(0,I.jsx)(E,{theme:s,onToggleTheme:n}),(0,I.jsxs)(a.Z.Content,{className:m().content,children:[(0,I.jsx)(_.YE,{}),e.children]})]})})},Z=D},80560:function(e,t,r){"use strict";var a=r(1672),o=r(27398),i=e=>{var t=e.key,r=e.value;return t?(localStorage.setItem(t,r),!0):(a.Z.error("saveLocalStorage key \u4e0d\u5b58\u5728",t),!1)},s=e=>(e.forEach((e=>{var t=null!==e&&void 0!==e?e:{},r=t.key,o=t.value;if(!r)return a.Z.error("saveBatchLocalStorage key \u4e0d\u5b58\u5728: ",r),!1;localStorage.setItem(r,o)})),!0),l=(e,t)=>{var r;if(!e)return a.Z.error("getLocalStorage: key \u4e0d\u5b58\u5728"),"";var i=null!==t&&void 0!==t?t:{},s=i.returnType,l=void 0===s?"string":s,n=o.c7[l];return n(null!==(r=localStorage.getItem(e))&&void 0!==r?r:"")},n=e=>e?(localStorage.removeItem(e),!0):(a.Z.warn("clearLocalStorage: key \u4e0d\u5b58\u5728"),!1),c=()=>(localStorage.clear(),!0),d=e=>{var t=e.key,r=e.value;t?sessionStorage.setItem(t,r):a.Z.error("saveSessionStorage: key \u4e0d\u5b58\u5728")},u=e=>{var t;return e?null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:"":(a.Z.error("getSessionStorage: key \u4e0d\u5b58\u5728"),"")};t["Z"]={saveLocalStorage:i,saveBatchLocalStorage:s,getLocalStorage:l,clearLocalStorage:n,clearAllLocalStorage:c,saveSessionStorage:d,getSessionStorage:u}}}]);
//# sourceMappingURL=index.7988dc47.async.js.map