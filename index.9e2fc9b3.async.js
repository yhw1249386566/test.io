(self["webpackChunk"]=self["webpackChunk"]||[]).push([[826],{28487:function(e){e.exports={content:"content___3-pTm",layout:"layout___1uzIr",absoluteHorizontalVerticalCenter:"absoluteHorizontalVerticalCenter___21_uB",marginHorizontalVerticalCenter:"marginHorizontalVerticalCenter___3QJyU",textOverflowEllipsis:"textOverflowEllipsis___1wr59"}},92649:function(e){e.exports={"header-light":"header-light___3cGmx","header-dark":"header-dark___pcRuq",header:"header___2O2lm",bars:"bars___26yCn",title:"title___a0WaH",themeIcon:"themeIcon___q2Qkx",headerInfo:"headerInfo___25wHO",hideBars:"hideBars___bkJr0",back:"back___FsmmO",hideLeftIcon:"hideLeftIcon___L5pJo",navigation:"navigation___3mfr-",absoluteHorizontalVerticalCenter:"absoluteHorizontalVerticalCenter___2C_vn",marginHorizontalVerticalCenter:"marginHorizontalVerticalCenter___scs3c",textOverflowEllipsis:"textOverflowEllipsis___PsGMq"}},26812:function(e,t,i){"use strict";var n=i(64714);class r extends n.Z{constructor(){super(),this.singleEventEmitterInstance=void 0,this.singleEventEmitterInstance=null}static get singleInstance(){return this.singleEventEmitterInstance||(this.singleEventEmitterInstance=new n.Z),this.singleEventEmitterInstance}on(e,t,i){var n;return null===(n=this.singleEventEmitterInstance)||void 0===n||n.on(e,t,i),this}emit(e){for(var t,i,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return null!==(t=null===(i=this.singleEventEmitterInstance)||void 0===i?void 0:i.emit(e,...r))&&void 0!==t&&t}off(e,t,i,n){var r;return null===(r=this.singleEventEmitterInstance)||void 0===r||r.off(e,t,i,n),this}removeAllListeners(e){var t;return null===(t=this.singleEventEmitterInstance)||void 0===t||t.removeAllListeners(e),this}}r.singleEventEmitterInstance=void 0,t["Z"]=r},39361:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return O}});i(24793);var n=i(25596),r=i(57337),s=i(67294),a=i(84131),l=i(9382),o=i(747),d=i(8870),c=Symbol();class h{constructor(e){if(this.db=void 0,this.dbName=void 0,this.dbVersion=void 0,this.dbStoreName=void 0,this.specifyKey=void 0,e&&e!==c)throw new Error("\u610f\u5916\u7684\u91cd\u590d\u521d\u59cb\u5316 IndexedDB");this.db=null,this.dbName="",this.dbVersion=1,this.dbStoreName="",this.specifyKey=""}static get singleInstance(){return this.indexedDBInstance||(this.indexedDBInstance=new h(c)),this.indexedDBInstance}getObjectStore(e,t){var i,n,r;return null!==(i=this.db)&&void 0!==i&&i.transaction||(sessionStorage.setItem("indexedDB_this",JSON.stringify(this)),location.reload(),console.info("\u5df2\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\uff0c\u67e5\u770b session \u627e\u9519\u8bef\u539f\u56e0")),null===(n=this.db)||void 0===n||null===(r=n.transaction(e,t))||void 0===r?void 0:r.objectStore(e)}open(e){var t=null!==e&&void 0!==e?e:{},i=t.specifyKey,n=void 0===i?"filepath":i,r=t.dbName,s=void 0===r?"yomuaDB":r,a=t.dbVersion,l=void 0===a?1:a,o=t.dbStoreName,d=void 0===o?"yomua":o;this.dbName=s,this.dbVersion=l,this.dbStoreName=d,this.specifyKey=n;var c=window.indexedDB.open(s,l);c.onupgradeneeded=e=>{var t,i=null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.result.createObjectStore(d,{keyPath:"id",autoIncrement:!0});i.createIndex(this.specifyKey,this.specifyKey,{unique:!0})},c.onsuccess=()=>{this.db=c.result}}getDataFromStore(e){if(!e)return null;var t=this.getObjectStore(this.dbStoreName,"readonly"),i=t.index(this.specifyKey);return i.get(e)}addDataFromStore(e,t){if(!e)return null;var i=this.getObjectStore(this.dbStoreName,"readwrite");return null===i||void 0===i?void 0:i.add((0,d.Z)((0,d.Z)({},t),{},{filepath:e}))}deleteDataFromStore(e){if(!e)return null;var t=this.getObjectStore(this.dbStoreName,"readwrite"),i=t.index(this.specifyKey);i.get(e).onsuccess=e=>{var i,n,r=null===e||void 0===e||null===(i=e.target)||void 0===i||null===(n=i.result)||void 0===n?void 0:n.id;null===t||void 0===t||t.delete(r)}}updateDataFromStore(e,t){if(!e)return null;var i=this.getObjectStore(this.dbStoreName,"readwrite"),n=i.getAll();n.onsuccess=n=>{var r,s=(null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.result)||[],a=s.find((t=>t.filepath===e));a?i.put((0,d.Z)((0,d.Z)({},a),{},{file:t})):this.addDataFromStore(e,{filepath:e,file:t})}}clearDataFromStore(){var e=this.getObjectStore(this.dbStoreName,"readwrite");e.clear()}}h.indexedDBInstance=void 0;var u=h,v=i(28487),m=i.n(v),_=i(19228),g=i(10186),f=i(51615),b=i(67814),E=i(57208),I=i(26812),p=i(27398),y=i(92649),S=i.n(y),x=i(85893),N=e=>{var t=e.theme,i=void 0===t?"light":t,n=e.onToggleTheme,l=void 0===n?()=>null:n,o=(0,s.useState)(!1),d=(0,r.Z)(o,2),c=d[0],h=d[1],u=(0,f.k6)(),v=(0,f.TH)(),m=(0,s.useCallback)((()=>{u.push("/".concat(p.QV.Index)),h(!1)}),[]),y=(0,s.useCallback)((e=>()=>{_.tO.saveLocalStorage({key:p.by.DATA_THEME,value:"light"===e?"dark":"light"}),l("light"!==e?"light":"dark")}),[]),N=(0,s.useCallback)((()=>{I.Z.singleInstance.emit(p.Re.SHOW_HEADER_X,!c),I.Z.singleInstance.emit(p.Re.OPEN_ARTICLE_DIRECTORY)}),[c]);(0,s.useCallback)((()=>{u.goBack()}),[]);return(0,s.useEffect)((()=>(I.Z.singleInstance.on(p.Re.SHOW_HEADER_X,(e=>{h(e)})),()=>{I.Z.singleInstance.off(p.Re.SHOW_HEADER_X)})),[]),(0,x.jsx)("div",{className:(0,E.Z)(S().header,S()["header-".concat(i)]),children:(0,x.jsxs)(g.Nm,{alignItems:"center",justifyContent:"space-between",className:S().headerInfo,children:[(0,x.jsx)(b.G,{icon:c?"times":"bars",className:(0,E.Z)(S().bars,{[S().hideBars]:"/feature/article"!==v.pathname&&!v.pathname.includes("/heading")}),onClick:N}),(0,x.jsx)(g.xv,{className:S().title,onClick:m,children:"\u9752\u82bd"}),(0,x.jsx)(b.G,{className:S().themeIcon,icon:"light"===i?a.enB:a.DBF,onClick:y(i)})]})})},k=(0,s.memo)(N),C=i(90155);l.vI.add(a.mRB,o.pZl,o.NY9,o.D9H,o.sd1),u.singleInstance.open({dbName:"yomuaDB",dbVersion:1,dbStoreName:"yomua",specifyKey:"filepath"});var D=e=>{var t=(0,s.useState)("light"),i=(0,r.Z)(t,2),a=i[0],l=i[1],o=(0,s.useCallback)((e=>{l(e)}),[]);return(0,s.useEffect)((()=>{var e=document.querySelector("html");e&&e.setAttribute(p.by.DATA_THEME,a)}),[a]),(0,s.useEffect)((()=>{var e=_.tO.getLocalStorage(p.by.DATA_THEME);e&&l(e)}),[]),(0,x.jsx)(C.f,{theme:a,children:(0,x.jsxs)(n.Z,{className:m().layout,children:[(0,x.jsx)(k,{theme:a,onToggleTheme:o}),(0,x.jsxs)(n.Z.Content,{className:m().content,children:[(0,x.jsx)(g.YE,{}),e.children]})]})})},O=D}}]);
//# sourceMappingURL=index.9e2fc9b3.async.js.map